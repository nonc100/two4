<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#05030f" />
  <title>TWO.4 · Cosmic Liquidity &amp; CVD</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./cvd-heatmap.css" />
</head>
<body>
  <div class="nebula-overlay" aria-hidden="true"></div>
  <header class="dashboard-header">
    <a class="back-link" href="/menu/cosmos/">
      <span aria-hidden="true">⭠</span>
      <span>Cosmos Hub</span>
    </a>
    <div class="header-title">
      <h1>Cosmic Liquidity Matrix</h1>
      <p>Binance BTCUSDT · Futures orderbook heatmap + CVD bands</p>
    </div>
  </header>

  <main class="dashboard-main">
    <div class="timeframe-toolbar" role="group" aria-label="Select timeframe">
      <button type="button" class="tf-button" data-tf="1m">1m</button>
      <button type="button" class="tf-button" data-tf="5m">5m</button>
      <button type="button" class="tf-button" data-tf="15m">15m</button>
      <button type="button" class="tf-button" data-tf="1h">1h</button>
      <button type="button" class="tf-button" data-tf="4h">4h</button>
      <button type="button" class="tf-button" data-tf="1d">1d</button>
    </div>

    <section class="panel heatmap-panel" aria-labelledby="heatmapTitle">
      <div class="panel-header">
        <div>
          <h2 id="heatmapTitle">Liquidity Heatmap</h2>
          <p class="panel-description">Price-time liquidity heatmap built from 30s snapshots · Blue line tracks the live mid price</p>
        </div>
        <div class="panel-meta">
          <div>
            <span class="meta-label">Symbol</span>
            <span class="meta-value neon" data-symbol>BTCUSDT</span>
          </div>
          <div>
            <span class="meta-label">Last Price</span>
            <span class="meta-value" data-price>--</span>
          </div>
          <div>
            <span class="meta-label">Last Update</span>
            <span class="meta-value" data-updated>--</span>
          </div>
          <div>
            <span class="meta-label">Stream</span>
            <span class="status-pill" data-status data-status-state="idle">Initializing</span>
          </div>
        </div>
      </div>
      <div class="chart" id="heatmapChart" role="img" aria-label="Heatmap of liquidity"></div>
    </section>

    <section class="panel cvd-panel" aria-labelledby="cvdTitle">
      <div class="panel-header">
        <div>
          <h2 id="cvdTitle">Neon CVD Bands</h2>
          <p class="panel-description">One-minute cumulative buy &amp; sell delta · Five bands by order size plus the total cumulative line</p>
        </div>
        <div class="panel-hints">
          <span>Toggle lines via the legend · Drag to zoom · Time axis synced with the heatmap above</span>
        </div>
      </div>
      <div class="chart" id="cvdChart" role="img" aria-label="CVD lines by notional size"></div>
    </section>
  </main>

  <footer class="dashboard-footer">
    Data from Binance WebSocket · Aggregated &amp; cached in SQLite · Crafted for TWO.4 Cosmos
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js" defer></script>
  <script src="./cvd-heatmap.js" defer></script>
</body>
</html>
