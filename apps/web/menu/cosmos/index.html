<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>TWO4 COSMOS</title>
<style>
:root{
  --bg:#0b1018;
  --panel:#111827;
  --text:#e8eefc;
  --muted:#9aa3b6;
  --up:#22c55e; --down:#ef4444;
  --card-border: rgba(255,255,255,.08);
  --sticky-top: 90px;              /* 헤더 고정 offset */
  --starVis:.75;                   /* 별 밝기(0~1) */
  --rank-w:48px; --name-w:280px;   /* 좌측 고정 열 폭 */
}

/* reset */
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);
  font:14px/1.5 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic"}
img{max-width:100%;height:auto}
a{text-decoration:none;color:inherit}

/* ===== Starfield ===== */
.sky{position:fixed;inset:0;z-index:0;pointer-events:none;background:radial-gradient(1200px 700px at 50% -220px,#182036 0%,var(--bg) 60%)}
.star{position:absolute;inset:0;background-repeat:repeat;background-size:1600px 1600px;filter:blur(.2px)}
.star.s1{opacity:calc(.55*var(--starVis));animation:tw1 22s linear infinite;
  background-image:radial-gradient(1px 1px at 20px 30px #fff8 50%,transparent 51%),radial-gradient(1px 1px at 320px 120px #fff8 50%,transparent 51%),radial-gradient(1px 1px at 720px 520px #fff8 50%,transparent 51%)}
.star.s2{opacity:calc(.35*var(--starVis));animation:tw2 32s linear infinite;
  background-image:radial-gradient(1px 1px at 120px 80px #fff6 50%,transparent 51%),radial-gradient(1px 1px at 560px 260px #fff6 50%,transparent 51%),radial-gradient(1px 1px at 960px 840px #fff6 50%,transparent 51%)}
.star.s3{opacity:calc(.25*var(--starVis));animation:tw3 44s linear infinite;
  background-image:radial-gradient(1px 1px at 70px 20px #fff5 50%,transparent 51%),radial-gradient(1px 1px at 260px 220px #fff5 50%,transparent 51%),radial-gradient(1px 1px at 1120px 820px #fff5 50%,transparent 51%)}
@keyframes tw1{from{background-position:0 0}to{background-position:-1600px -1600px}}
@keyframes tw2{from{background-position:0 0}to{background-position:-1200px -800px}}
@keyframes tw3{from{background-position:0 0}to{background-position:-900px -600px}}

/* top tiny controller */
.star-ctl{
  position:fixed; left:50%; top:10px; transform:translateX(-50%);
  z-index:10; display:flex; align-items:center; gap:8px;
  padding:8px 12px; border-radius:999px; font-size:12px; color:#cfe1ff;
  background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.2); backdrop-filter:blur(10px);
}
.star-ctl input[type=range]{width:160px;height:6px;background:transparent}
.star-ctl input[type=range]::-webkit-slider-runnable-track{height:6px;border-radius:999px;background:linear-gradient(90deg,#a78bfa,#22d3ee)}
.star-ctl input[type=range]::-webkit-slider-thumb{appearance:none;width:14px;height:14px;border-radius:50%;background:#fff;border:1px solid #0002}

/* layout */
.wrap{position:relative;z-index:1;max-width:1240px;margin:0 auto;padding:64px 16px 90px}
.brand{display:flex;align-items:center;gap:10px;margin:8px 0 14px}
.brand img{height:38px}

/* ===== Hub (donut) ===== */
.hub-grid{display:grid;grid-template-columns:minmax(280px,520px) 1fr;gap:18px;align-items:center}
@media (max-width:900px){.hub-grid{grid-template-columns:1fr}}
.hub{position:relative;aspect-ratio:1/1;border-radius:50%;
  background:radial-gradient(100% 100% at 35% 30%, #1b2340 0%, #0c1220 60%, #0000 80%);
  box-shadow:inset 0 8px 28px rgba(255,255,255,.06), 0 18px 48px rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.06);
}
.hub svg{position:absolute;inset:0}

/* central planet */
.center-cap{position:absolute;inset:50% auto auto 50%; transform:translate(-50%,-50%);
  width:36%; height:36%; border-radius:50%; display:flex; align-items:center; justify-content:center; flex-direction:column;
  background:
    radial-gradient(60% 60% at 40% 35%, rgba(46,204,250,.16), rgba(124,58,237,.10) 60%, transparent 80%),
    radial-gradient(120% 120% at 50% 120%, rgba(255,255,255,.08), transparent 60%);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:inset 0 10px 26px rgba(0,0,0,.35), 0 0 30px #0008;
  animation:float 6s ease-in-out infinite, spin 24s linear infinite;
}
.center-cap::before{/* halo */
  content:""; position:absolute; inset:-10%; border-radius:50%;
  background:radial-gradient(60% 60% at 50% 50%, rgba(115,194,255,.18), transparent 70%);
  filter:blur(8px);
}
@keyframes float{0%,100%{transform:translate(-50%,-51%)}50%{transform:translate(-50%,-49%)}}
@keyframes spin{from{transform:translate(-50%,-50%) rotate(0deg)}to{transform:translate(-50%,-50%) rotate(360deg)}}

.center-big{font-weight:900;font-size:clamp(16px,3.2vw,28px);letter-spacing:.02em;margin:0 0 4px}
.center-sub{font-size:12px;color:var(--muted);margin:0}

/* segment paths */
.seg{cursor:pointer;stroke:rgba(255,255,255,.14);stroke-width:1.2;transition:transform .18s ease, opacity .18s ease}
.seg:hover{transform:scale(1.02)}
.seg.active{transform:scale(1.03)}
/* labels 2x, no glow */
.seg-label{font-weight:900;font-size:clamp(16px,1.8vw,22px);letter-spacing:.02em;fill:#e8f6ff}

/* right panel */
.panel{min-height:240px;border-radius:16px;padding:14px;background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.10); backdrop-filter:blur(12px)}
.panel h4{margin:2px 0 10px;font-size:14px;color:#b9c3d6;letter-spacing:.08em}
.list{display:flex;flex-direction:column;gap:6px}
.row{display:grid;grid-template-columns:1.6em 1fr auto auto;gap:8px;align-items:center;font-size:13.5px}
.row .rk{opacity:.7;text-align:right;font-weight:800}
.row .tk{font-weight:900}
.row .px{opacity:.9;text-align:right}
.row .pc{font-weight:900;text-align:right}
.row .pc.up{color:var(--up)} .row .pc.down{color:var(--down)}

/* gauge */
.gauge{width:100%;height:140px}
.g-arc{stroke-linecap:round;stroke-width:16;fill:none}
.needle{stroke:#fff;stroke-width:8;stroke-linecap:round}

/* ===== Controls + Table ===== */
.controls{display:flex;gap:10px;align-items:center;margin:16px 0 8px}
.controls .search{flex:1}
input[type=text], select, button{
  background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
  color:var(--text); border-radius:10px; padding:9px 12px; outline:none;
}

.table-wrap{overflow-x:auto;margin-top:8px}
table{width:1200px;border-collapse:separate;border-spacing:0 10px}
thead th{
  position:sticky; top:var(--sticky-top); z-index:5;
  background:rgba(17,24,39,.92); backdrop-filter:blur(8px);
  font-size:12px; color:#b9c3d6; font-weight:700; padding:8px 10px;
}
#spacer{height:calc(var(--sticky-top) + 8px)} /* 헤더와 겹침 방지용 상단 여백 */

.c-rank{width:var(--rank-w)} .c-name{width:var(--name-w)}
.c-price,.c-24h{width:120px} .c-1h,.c-7d{width:110px}
.c-mcap,.c-vol{width:140px} .c-spark{width:120px}

#mkt thead th, #mkt tbody td{background:rgba(17,24,39,.85)}
#mkt tbody td{border:1px solid rgba(255,255,255,.08);padding:12px 10px;vertical-align:middle}
#mkt tbody tr td:first-child{border-radius:12px 0 0 12px}
#mkt tbody tr td:last-child{border-radius:0 12px 12px 0}

#mkt .sticky-rank{position:sticky;left:0;z-index:2}
#mkt .sticky-name{position:sticky;left:var(--rank-w);z-index:2}

/* name cell content */
.mkt-name{display:flex;align-items:center;gap:10px;cursor:pointer}
.mkt-name img{width:20px;height:20px;border-radius:50%}
.mkt-name .sym{font-weight:800;margin-right:6px}
.mkt-name .full{opacity:.85}
.num{text-align:right;font-variant-numeric:tabular-nums}
.pct.up{color:#22c55e}.pct.down{color:#ef4444}
td.spark canvas{display:block;width:120px;height:28px}

/* 모바일: Rank + Symbol + Price + 24h + Spark 만 노출(가로 스크롤 없이) */
@media (max-width:800px){
  :root{--sticky-top:96px; --name-w:140px}
  .wrap{padding-top:84px}
  .hide-m{display:none!important}
  .c-1h,.c-7d,.c-mcap,.c-vol{display:none}
  table{width:760px} /* 스파크까지 보이되 좌우 여백 최소화 */
}

/* 링크 밑줄/방문색 제거 */
.no-link,.no-link:visited,.no-link:hover,.no-link:active{color:inherit;text-decoration:none}

footer{margin:24px 0 0;text-align:center;color:#9aa3b6;opacity:.8;font-size:12px}
</style>
</head>
<body>
  <!-- starfield -->
  <div class="sky"><div class="star s1"></div><div class="star s2"></div><div class="star s3"></div></div>

  <!-- star controller -->
  <div class="star-ctl">
    <span style="opacity:.85">Stars</span>
    <input id="starRange" type="range" min="0" max="100" value="75" />
  </div>

  <div class="wrap">
    <div class="brand"><img src="/media/logo.png" alt="TWO4" /></div>

    <!-- Hub -->
    <section class="hub-grid">
      <div class="hub">
        <svg id="hubSvg" viewBox="0 0 1000 1000" aria-label="Cosmos sectors"></svg>
        <div class="center-cap">
          <div class="center-big" id="cBig">COSMOS</div>
          <div class="center-sub" id="cSub">—</div>
        </div>
      </div>
      <aside class="panel" id="panel">
        <h4 id="pTitle">—</h4>
        <div id="pBody">Select a sector.</div>
      </aside>
    </section>

    <!-- Controls -->
    <div class="controls">
      <input class="search" id="q" type="text" placeholder="Search coin (name/symbol)" />
    </div>

    <!-- spacer to avoid overlap when thead is sticky -->
    <div id="spacer" aria-hidden="true"></div>

    <!-- Market table -->
    <div class="table-wrap">
      <table id="mkt" class="cosmos-table">
        <colgroup>
          <col class="c-rank"><col class="c-name"><col class="c-price">
          <col class="c-1h"><col class="c-24h"><col class="c-7d">
          <col class="c-mcap"><col class="c-vol"><col class="c-spark">
        </colgroup>
        <thead>
          <tr>
            <th data-key="rank"   class="sticky-rank th th-sort">#</th>
            <th data-key="name"   class="sticky-name th th-sort">Name</th>
            <th data-key="price"  class="th th-sort num">Price</th>
            <th data-key="change1h"  class="th th-sort num hide-m">1h</th>
            <th data-key="change24h" class="th th-sort num">24h</th>
            <th data-key="change7d"  class="th th-sort num hide-m">7d</th>
            <th data-key="market_cap" class="th th-sort num hide-m">Market Cap</th>
            <th data-key="volume"     class="th th-sort num hide-m">24h Volume</th>
            <th class="num">7d Spark</th>
          </tr>
        </thead>
        <tbody id="mktBody"></tbody>
      </table>
    </div>

    <div id="pager" class="controls" style="justify-content:center;gap:6px"></div>

    <footer>Cosmos Dashboard · CoinGecko · Binance · Alternative.me · 30s auto refresh</footer>
  </div>

  <script src="./cosmos.js"></script>
</body>
</html>
