<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>TWO4 COSMOS</title>
  <style>
    :root{
      /* layout */
      --wrap-max: 1240px;
      --rank-w: 3.2ch;    /* 랭크 좁게 */
      --name-w: 12ch;     /* 심볼 영역 */
      --price-w: 10ch;
      --pct-w: 7ch;
      --spark-w: 120px;

      /* colors */
      --bg:#0b1018;
      --panel:#111827;
      --text:#e8eefc;
      --muted:#9aa3b6;
      --up:#22c55e; --down:#ef4444;

      /* stars */
      --starVis: .8;   /* 0~1 밝기/밀도 */
    }

    *{box-sizing:border-box}
    html,body{
      margin:0; padding:0; color:var(--text);
      background:#0b1018;
      font:14px/1.5 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic";
      overflow-x:hidden;
    }
    a, a:visited, a:hover, a:active{color:inherit; text-decoration:none}

    /* ⭐ Starfield (더 촘촘 & 살짝 큼) */
    .sky{position:fixed; inset:0; z-index:0; pointer-events:none; background: radial-gradient(1200px 700px at 50% -200px, #182036 0%, var(--bg) 55%)}
    .stars{position:absolute; inset:0}
    /* 3 레이어를 서로 다른 타일/투명도로 반복 */
    .stars.l1{
      opacity:calc(.75 * var(--starVis));
      background:
        radial-gradient(circle, rgba(255,255,255,.9) 0 1.2px, transparent 1.3px) 0 0/3px 3px,
        radial-gradient(circle, rgba(255,255,255,.8) 0 1.2px, transparent 1.3px) 1.5px 1.5px/3px 3px;
      animation: drift1 50s linear infinite;
      filter: drop-shadow(0 0 .6px #fff);
    }
    .stars.l2{
      opacity:calc(.45 * var(--starVis));
      background:
        radial-gradient(circle, rgba(255,255,255,.8) 0 1px, transparent 1.1px) 0 0/4px 4px,
        radial-gradient(circle, rgba(255,255,255,.7) 0 1px, transparent 1.1px) 2px 2px/4px 4px;
      animation: drift2 70s linear infinite reverse;
    }
    .stars.l3{
      opacity:calc(.30 * var(--starVis));
      background:
        radial-gradient(circle, rgba(255,255,255,.7) 0 .9px, transparent 1px) 0 0/6px 6px,
        radial-gradient(circle, rgba(255,255,255,.6) 0 .9px, transparent 1px) 3px 3px/6px 6px;
      animation: drift3 110s linear infinite;
      filter: blur(.15px);
    }
    @keyframes drift1{from{transform:translate(0,0)} to{transform:translate(-60px,-40px)}}
    @keyframes drift2{from{transform:translate(0,0)} to{transform:translate(40px,-30px)}}
    @keyframes drift3{from{transform:translate(0,0)} to{transform:translate(-30px,30px)}}

    /* ⭐ 상단 중앙 아주 작은 컨트롤러 */
    .star-ctl{
      position:fixed; left:50%; top:10px; transform:translateX(-50%);
      z-index:10; display:flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px;
      background:rgba(255,255,255,.08);
      backdrop-filter:blur(10px); border:1px solid rgba(255,255,255,.22);
      color:#dbeafe; font-size:12px; font-weight:800;
    }
    .star-ctl input[type="range"]{width:120px; height:6px; background:transparent}
    .star-ctl input[type="range"]::-webkit-slider-runnable-track{height:6px; border-radius:999px; background:linear-gradient(90deg,#a78bfa,#22d3ee)}
    .star-ctl input[type="range"]::-webkit-slider-thumb{appearance:none; width:14px; height:14px; border-radius:50%; background:#fff; border:1px solid #0002}

    /* 상단 로고(오른쪽 상단 배치) */
    .logo{
      position:fixed; right:12px; top:10px; z-index:9;
      display:flex; align-items:center; gap:8px; opacity:.95;
      padding:6px 8px; border-radius:10px; background:rgba(0,0,0,.15);
      border:1px solid rgba(255,255,255,.08); backdrop-filter: blur(8px);
    }
    .logo img{height:24px; width:auto}

    .wrap{position:relative; z-index:1; max-width:var(--wrap-max); margin:0 auto; padding:62px 16px 80px}

    /* Controls */
    .controls{display:flex; gap:10px; align-items:center; margin:14px 0 8px}
    .controls .search{flex:1}
    input[type="text"]{
      background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); color:var(--text);
      border-radius:10px; padding:10px 12px; outline:none;
    }

    /* Table */
    .table-wrap{overflow-x:auto; margin-top:8px}
    table{width:1200px; border-collapse:separate; border-spacing:0 10px}
    thead th{
      /* 상단 고정 제거 → 겹침 문제 해소 */
      font-size:12px; color:#b9c3d6; font-weight:800; padding:8px 10px; text-align:left;
      user-select:none; cursor:pointer;
    }
    thead th.text-right, td.text-right{text-align:right}
    tbody td{
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      padding:12px 10px; vertical-align:middle;
    }
    tbody tr td:first-child{border-radius:12px 0 0 12px}
    tbody tr td:last-child{border-radius:0 12px 12px 0}

    /* 좌측 고정(정답) */
    .sticky-rank{position:sticky; left:0; z-index:2; background:rgba(17,24,39,.86); font-weight:800; text-align:right; width:var(--rank-w)}
    .sticky-name{position:sticky; left:var(--rank-w); z-index:2; background:rgba(17,24,39,.86); width:var(--name-w)}

    /* name cell */
    .mkt-name{display:flex; align-items:center; gap:8px; min-width:var(--name-w)}
    .mkt-name img{width:18px; height:18px; border-radius:50%; object-fit:contain}
    .mkt-name .sym{font-weight:900}
    .mkt-name .full{opacity:.85; margin-left:4px}

    /* 숫자 */
    .num{font-variant-numeric: tabular-nums; text-align:right}
    .pct.up{color:var(--up)} .pct.down{color:var(--down)}

    /* col widths */
    .c-rank{width:var(--rank-w)}
    .c-name{width:var(--name-w)}
    .c-price{width:var(--price-w)}
    .c-1h,.c-24h{width:var(--pct-w)}
    .c-7d{width:var(--pct-w)}
    .c-mcap,.c-vol{width:10ch}
    .c-spark{width:var(--spark-w)}

    td.spark canvas{display:block; width:var(--spark-w); height:28px}

    /* 모바일(새로버전): # · 티커 · Price · 24h · Spark 만 */
    @media (max-width:800px){
      table{width:900px}
      .hide-m{display:none !important}
      .mkt-name .full{display:none}
      :root{ --name-w: 8.6ch; --price-w: 9.8ch; --pct-w: 6.6ch; }
    }

    /* Pager */
    #pager{display:flex; gap:6px; justify-content:center; margin-top:10px}
    #pager button{
      padding:6px 10px; border-radius:10px; border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06); color:var(--text)
    }
    #pager button.on{background:rgba(255,255,255,.16)}

    footer{margin:24px 0 0; text-align:center; color:#9aa3b6; opacity:.8; font-size:12px}
  </style>
</head>
<body>
  <!-- ⭐ 별 배경 -->
  <div class="sky">
    <div class="stars l1"></div>
    <div class="stars l2"></div>
    <div class="stars l3"></div>
  </div>

  <!-- ⭐ 상단 중앙 컨트롤러 -->
  <div class="star-ctl" aria-label="Star background controller">
    <span>Stars</span>
    <input id="starRange" type="range" min="0" max="100" value="80" />
  </div>

  <!-- 상단 로고(우상단) -->
  <div class="logo">
    <img src="/media/logo.png" alt="TWO4" />
  </div>

  <div class="wrap">
    <div class="controls">
      <input id="search" class="search" type="text" placeholder="Search coin (symbol/name)" />
    </div>

    <div class="table-wrap">
      <table id="mkt" class="cosmos-table">
        <colgroup>
          <col class="c-rank"><col class="c-name"><col class="c-price">
          <col class="c-1h"><col class="c-24h"><col class="c-7d">
          <col class="c-mcap"><col class="c-vol"><col class="c-spark">
        </colgroup>
        <thead>
          <tr>
            <th data-key="rank"     class="sticky-rank">#</th>
            <th data-key="symbol"   class="sticky-name">Name</th>
            <th data-key="price"    class="text-right">Price</th>
            <th data-key="change1h" class="text-right hide-m">1h</th>
            <th data-key="change24h" class="text-right">24h</th>
            <th data-key="change7d" class="text-right hide-m">7d</th>
            <th data-key="market_cap" class="text-right hide-m">Market Cap</th>
            <th data-key="volume"     class="text-right hide-m">24h Volume</th>
            <th class="text-right">7d Spark</th>
          </tr>
        </thead>
        <tbody id="mktBody"></tbody>
      </table>
    </div>

    <div id="pager"></div>

    <footer>Cosmos Dashboard · CoinGecko API · 30s auto refresh · row click → /menu/cosmos/chart.html</footer>
  </div>

  <script src="./cosmos.js"></script>
</body>
</html>
