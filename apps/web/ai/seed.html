<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Seed AI</title>
  <style>
    :root{
      --bg1:#0a0a0a; --bg2:#1a1a2e; --glass:rgba(15,15,25,.6);
      --ink:#e0e0e0; --ink-dim:rgba(255,255,255,.75);
      --neon1:#667eea; --neon2:#764ba2; --ring:rgba(102,126,234,.2);
      --input-bg:rgba(10,10,20,.35);
      --bubble-ai:rgba(102,126,234,.10); --bubble-user:rgba(255,255,255,.06);
      --good:#60ffa3; --bad:#ff6b6b;
      --glow:#00ffcc; --glow2:#ff00ff;
      --toggle-on:#ffd93d; --toggle-off:#6b6b6b;
    }
    *{margin:0;padding:0;box-sizing:border-box} html,body{height:100%}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
      color:var(--ink); background:linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 100%); overflow:hidden; position:relative}
    body::before{content:'';position:absolute;inset:-25%;
      background:radial-gradient(circle at 20% 50%, rgba(102,126,234,.10) 0%, transparent 50%),
                 radial-gradient(circle at 80% 80%, rgba(118,75,162,.10) 0%, transparent 50%),
                 radial-gradient(circle at 40% 20%, rgba(102,126,234,.05) 0%, transparent 50%);
      animation:bgFloat 22s ease-in-out infinite; z-index:-1}
    @keyframes bgFloat{0%,100%{transform:translate(-8%,-8%) rotate(0)}50%{transform:translate(8%,8%) rotate(180deg)}}

    .chat-wrapper{width:min(1200px,100%); height:100dvh; display:flex; flex-direction:column; margin-inline:auto;
      background:var(--glass); border:1px solid rgba(255,255,255,.08); border-radius:22px;
      backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
      box-shadow:0 0 40px rgba(102,126,234,.10), inset 0 0 40px rgba(255,255,255,.02), 0 20px 60px rgba(0,0,0,.55);
      overflow:hidden; position:relative}
    .chat-wrapper::before{content:'';position:absolute;inset:-2px;border-radius:22px;padding:2px;
      background:linear-gradient(45deg, rgba(102,126,234,.55), rgba(118,75,162,.55), rgba(102,126,234,.55), rgba(118,75,162,.55));
      -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude;
      animation:borderSpin 9s linear infinite; pointer-events:none; opacity:.85}
    @keyframes borderSpin{to{transform:rotate(360deg)}}

    /* 헤더 얇은 흐르는 빛 효과 */
    .header{padding:14px 18px 10px; border-bottom:1px solid var(--ring); background:rgba(20,20,35,.55);
      display:flex; align-items:center; justify-content:space-between; position:relative; overflow:hidden}
    .header::after{content:'';position:absolute;bottom:0;left:-100%;width:100%;height:1px;
      background:linear-gradient(90deg, transparent, var(--glow), var(--glow2), transparent);
      animation:flowLight 3s linear infinite; opacity:0.7}
    @keyframes flowLight{to{left:100%}}
    
    .title{letter-spacing:.5px; font-size:18px; font-weight:800;
      background:linear-gradient(135deg,#fff 0%, var(--neon1) 45%, var(--neon2) 100%);
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent}
    .status{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--ink-dim);text-transform:uppercase}
    .status-dot{width:6px;height:6px;border-radius:50%;background:#00ff88;box-shadow:0 0 8px #00ff88}

    .chat-container{flex:1; overflow-y:auto; padding:20px 16px 24px; scroll-behavior:smooth; background:rgba(10,10,20,.18)}
    .chat-container::-webkit-scrollbar{width:5px}
    .chat-container::-webkit-scrollbar-thumb{background:linear-gradient(var(--neon1),var(--neon2));border-radius:3px}

    .message{display:flex; margin:12px 4px}
    .message.ai{justify-content:flex-start} .message.user{justify-content:flex-end}
    .bubble{max-width:min(700px,80%); padding:12px 14px; line-height:1.55; font-size:14px;
      border-radius:14px; border:1px solid rgba(255,255,255,.06); backdrop-filter:blur(10px);
      box-shadow:0 3px 15px rgba(0,0,0,.25), inset 0 0 12px rgba(255,255,255,.02); word-break:break-word}
    .message.ai .bubble{background:var(--bubble-ai); box-shadow:0 3px 18px rgba(102,126,234,.2), inset 0 0 15px rgba(255,255,255,.02);
      border-color:rgba(102,126,234,.2)}
    .message.user .bubble{background:var(--bubble-user); border-color:rgba(255,255,255,.08)}
    .bubble img{max-width:100%;border-radius:10px;display:block}

    .typing{display:flex;gap:5px;padding:8px 2px;margin-left:3px}
    .dot{width:7px;height:7px;border-radius:50%;background:linear-gradient(135deg,var(--neon1),var(--neon2));animation:blink 1.3s infinite}
    .dot:nth-child(2){animation-delay:.18s}.dot:nth-child(3){animation-delay:.36s}
    @keyframes blink{0%,60%,100%{opacity:.45;transform:translateY(0)}30%{opacity:1;transform:translateY(-6px)}}

    /* 입력창 얇은 흐르는 빛 효과 */
    .input-container{position:sticky; bottom:0; padding:10px env(safe-area-inset-right) calc(10px + env(safe-area-inset-bottom)) env(safe-area-inset-left);
      background:rgba(20,20,35,.55); border-top:1px solid var(--ring); overflow:hidden}
    .input-container::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:1px;
      background:linear-gradient(90deg, transparent, var(--glow2), var(--glow), transparent);
      animation:flowLight 3s linear infinite;animation-delay:1.5s; opacity:0.7}
      
    .input-wrapper{display:flex; align-items:center; gap:8px; background:var(--input-bg);
      border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:6px 8px 6px 10px;
      box-shadow:0 0 15px rgba(102,126,234,.1) inset; position:relative}
    .input-field{flex:1; background:transparent; border:none; outline:none; color:var(--ink);
      font-size:14px; line-height:1.4; resize:none; max-height:30dvh; padding:5px 2px}
    .input-field::placeholder{color:rgba(255,255,255,.3)}
    
    /* 컴팩트한 버튼 스타일 */
    .btn{width:36px;height:36px;border-radius:10px;border:1px solid rgba(255,255,255,.08);
      display:flex;align-items:center;justify-content:center;cursor:pointer;background:transparent;
      color:rgba(255,255,255,.6); transition:all .2s cubic-bezier(0.4,0,0.2,1); flex:0 0 auto;
      position:relative; overflow:hidden}
    .btn:hover{transform:translateY(-1px); box-shadow:0 4px 15px rgba(102,126,234,.25);
      border-color:rgba(102,126,234,.4)} 
    .btn:active{transform:translateY(0) scale(0.95)}
    
    /* 아이콘 버튼들 */
    .btn-icon{font-size:16px;background:linear-gradient(135deg, rgba(255,255,255,.02), rgba(255,255,255,.06));
      backdrop-filter:blur(8px)}
    
    /* 토글 버튼 - ON/OFF만 표시 */
    .btn-toggle{width:50px;padding:0 8px;font-size:11px;font-weight:600;letter-spacing:0.5px}
    .btn-toggle.on{background:var(--toggle-on);color:#000;border-color:var(--toggle-on)}
    .btn-toggle.off{background:var(--toggle-off);color:#fff;border-color:var(--toggle-off)}
    
    /* 전송 버튼 - 화살표 스타일 */
    .btn-send{border:none; background:linear-gradient(135deg, var(--neon1), var(--neon2));
      color:#fff; font-size:16px; position:relative}
    .btn-send:hover{box-shadow:0 0 20px rgba(102,126,234,.5), 0 0 40px rgba(118,75,162,.2)}
    
    /* SVG 아이콘들 */
    .icon-svg{width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
    
    @media (max-width:768px){
      .header{padding:12px 14px 8px}
      .title{font-size:16px}
      .chat-container{padding:16px 12px 20px}
      .bubble{max-width:88%;font-size:13px;padding:10px 12px}
      .btn{width:34px;height:34px}
      .icon-svg{width:16px;height:16px}
      .status{font-size:10px}
    }

    :root{ --action:#ffb86c } 
    .action{ color:var(--action); font-style:italic; font-weight:600; letter-spacing:.15px; font-size:0.9em }
    .action::before,.action::after{ content:'' }

    /* 설정 모달 - 모바일 최적화 */
    .settings-modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; 
      background:rgba(0,0,0,.65); z-index:50; backdrop-filter:blur(8px); padding:20px }
    .settings-card{ width:min(520px,100%); max-height:85vh; overflow-y:auto;
      background:linear-gradient(135deg, rgba(15,15,25,.95), rgba(25,15,35,.95)); 
      border:1px solid rgba(255,255,255,.15); border-radius:18px; padding:20px; 
      box-shadow:0 20px 60px rgba(0,0,0,.6), 0 0 80px rgba(102,126,234,.08);
      animation:modalIn .25s cubic-bezier(0.4,0,0.2,1)}
    @keyframes modalIn{from{opacity:0;transform:scale(0.92)}to{opacity:1;transform:scale(1)}}
    .settings-card h3{ margin-bottom:14px; font-size:20px; 
      background:linear-gradient(135deg, #fff, var(--neon1)); 
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent }
    .settings-grid{ display:flex; flex-direction:column; gap:12px }
    .settings-row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px }
    .settings-grid label{ display:flex; flex-direction:column; gap:5px; font-size:12px; color:var(--ink-dim)}
    .settings-grid input, .settings-grid select, .settings-grid textarea{ 
      background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.1); color:var(--ink); 
      border-radius:8px; padding:8px 10px; outline:none; transition:all .2s; font-size:13px }
    .settings-grid input:focus, .settings-grid select:focus, .settings-grid textarea:focus{
      border-color:var(--neon1); box-shadow:0 0 15px rgba(102,126,234,.15) }
    .settings-grid textarea{ resize:vertical; min-height:60px }
    .settings-actions{ margin-top:14px; display:flex; gap:8px; justify-content:flex-end }
    .tag{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; 
      border:1px solid rgba(255,255,255,.1); border-radius:20px; 
      background:rgba(255,255,255,.04); cursor:pointer; user-select:none; transition:all .2s;
      font-size:12px }
    .tag:hover{ background:rgba(102,126,234,.12); border-color:rgba(102,126,234,.25) }
    .tag input{ accent-color:var(--neon1); width:14px; height:14px }
    
    @media (max-width:480px){
      .settings-row{ grid-template-columns: 1fr }
      .settings-card{ padding:16px }
      .settings-card h3{ font-size:18px }
    }
  </style>
  <script src="/ai/seed.js" defer></script>
</head>
<body>
  <div class="chat-wrapper">
    <div class="header">
      <div class="title">SEED AI</div>
      <div style="display:flex; align-items:center; gap:8px">
        <button id="settingsBtn" class="btn btn-icon" type="button" title="설정">
          <svg class="icon-svg" viewBox="0 0 24 24">
            <path d="M12 15a3 3 0 100-6 3 3 0 000 6z"></path>
            <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path>
          </svg>
        </button>
        <button id="rpToggle" class="btn btn-toggle off" type="button" title="역할극 토글">OFF</button>
        <div class="status"><span class="status-dot"></span> Connected</div>
      </div>
    </div>

    <div id="chatContainer" class="chat-container">
      <div class="message ai">
        <div class="bubble">안녕하세요. TWO.4의 <b>Seed AI</b>입니다.</div>
      </div>
    </div>

    <div class="input-container">
      <div class="input-wrapper">
        <button id="uploadButton" class="btn btn-icon" type="button" title="파일 업로드">
          <svg class="icon-svg" viewBox="0 0 24 24">
            <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
          </svg>
        </button>
        <button id="actionButton" class="btn btn-icon" type="button" title="행동 모션(*…*)">
          <span style="font-size:14px;line-height:1">✱</span>
        </button>
        <textarea id="messageInput" class="input-field" rows="1" placeholder="메시지를 입력하세요..." autocomplete="off"></textarea>
        <button id="sendButton" class="btn btn-send" type="button" title="전송">
          <svg style="width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:2.5;stroke-linecap:round;stroke-linejoin:round" viewBox="0 0 24 24">
            <line x1="12" y1="19" x2="12" y2="5"></line>
            <polyline points="5 12 12 5 19 12"></polyline>
          </svg>
        </button>
        <input id="imageInput" type="file" accept="image/*" style="display:none" />
      </div>
    </div>
  </div>
</body>
</html>
